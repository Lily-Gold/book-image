<div class="fixed top-14 right-5 space-y-3 z-50">
  <% flash.each do |key, message| %>
    <% color_class =
      case key
      when "notice"
        "bg-[#E7F6EA] border-l-4 border-[#43A047] text-[#2E7D32]"
      when "alert"
        "bg-[#FDECEA] border-l-4 border-[#E57373] text-[#C62828]"
      else
        "bg-[#E3F2FD] border-l-4 border-[#64B5F6] text-[#1E88E5]"
      end %>

    <% auto_close = key == "notice" %>   <%# 成功だけ自動で閉じる %>

    <div
      data-controller="toast"
      data-toast-timeout-value="<%= auto_close ? 4000 : 0 %>"
      class="<%= color_class %> px-4 py-3 rounded-lg shadow-md flex items-center justify-between gap-4
             transform transition-all duration-300 opacity-0 translate-y-[-10px]"
    >
      <p class="font-medium"><%= message %></p>

      <% unless auto_close %>
        <button
          type="button"
          data-action="click->toast#close"
          class="text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer"
        >
          ✕
        </button>
      <% end %>
    </div>
  <% end %>
</div>
