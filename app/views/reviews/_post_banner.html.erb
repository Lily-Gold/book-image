<% if params[:just_posted].present? && params[:id].present? %>
  <% review = Review.find_by(id: params[:id]) %>

  <% if review.present? %>
    <div
      data-controller="post-banner"
      data-post-banner-visible-value="true"
      class="
        fixed bottom-5 md:bottom-8 left-1/2 -translate-x-1/2
        w-[92%] md:w-auto
        bg-white text-[#004865]
        px-4 md:px-6 py-4
        rounded-xl shadow-lg
        opacity-0 translate-y-3 transition-all duration-300
        flex flex-col md:flex-row items-center gap-3 md:gap-4
        z-50 border border-[#004865]/20
      "
    >

      <!-- テキスト -->
      <span class="text-sm md:text-base font-semibold text-center md:text-left">
        投稿したレビューをXでシェアしませんか？
      </span>

      <!-- ボタン -->
      <a
        href="https://twitter.com/intent/tweet?text=<%= ERB::Util.url_encode(share_text(review)) %>&url=<%= ERB::Util.url_encode(review_url(review)) %>"
        target="_blank"
        rel="noopener noreferrer"
        class="
          w-full md:w-auto
          flex items-center justify-center gap-2
          bg-black text-white
          px-4 py-2
          rounded-lg text-sm font-medium
          hover:opacity-90 transition
        "
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor"
             viewBox="0 0 24 24" width="18" height="18">
          <path d="M18.244 2H21.5l-7.42 8.495L23 22h-6.828l-5.364-7.044L4.896 22H1.64l7.93-9.073L2 2h6.91l4.713 6.231L18.244 2Zm-2.42 18h1.884L7.24 4H5.27l10.554 16Z"/>
        </svg>
        <span>シェアする</span>
      </a>

      <!-- 閉じる -->
      <button
        type="button"
        data-action="post-banner#close"
        class="
          absolute top-2 right-3
          md:static
          text-xl text-gray-500 hover:text-gray-800
          transition cursor-pointer
        "
      >
        ×
      </button>

    </div>
  <% end %>
<% end %>
