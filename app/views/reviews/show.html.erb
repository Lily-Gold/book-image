<div class="flex justify-center items-center min-h-[87vh]">
  <div class="w-full max-w-3xl my-[1.5rem] pb-[1.5rem]">

    <!-- ‚ñº „Éö„Éº„Ç∏„Çø„Ç§„Éà„É´ -->
    <h2 class="text-3xl font-bold text-center text-[#004865] mb-8">
      „É¨„Éì„É•„ÉºË©≥Á¥∞
    </h2>

    <!-- ‚ñº ÁôΩ„Ç´„Éº„ÉâÔºàËá™ÂàÜ„ÅÆ„É¨„Éì„É•„Éº‚Üípb-8 / ‰ªñ‰∫∫„ÅÆ„É¨„Éì„É•„Éº‚Üípb-4Ôºâ -->
    <div class="bg-white pt-8 px-10 rounded-xl shadow-lg <%= current_user == @review.user ? 'pb-8' : 'pb-1' %>">

      <!-- ‚ñº ‰∏äÊÆµÔºöÊõ∏ÂΩ± + Êú¨ÊÉÖÂ†± -->
      <div class="flex gap-8 mb-10 items-start">

        <!-- ‚ñº Êõ∏ÂΩ± + Âç∞Ë±°„Ç´„É©„Éº -->
        <div class="w-1/3">

          <!-- ‚ñº ÁîªÂÉèË°®Á§∫„Çµ„Ç§„Ç∫„ÇíÂÆåÂÖ®Áµ±‰∏ÄÔºà„É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøúÔºâ -->
          <div class="w-full aspect-[2/3] mx-auto mb-4">
            <% if @review.book.cover.attached? %>
              <%= image_tag @review.book.cover,
                    class: "w-full h-full object-cover rounded shadow-md" %>
            <% else %>
              <%= image_tag "no_cover.png",
                    class: "w-full h-full object-cover rounded shadow-md" %>
            <% end %>
          </div>

          <div class="flex items-center gap-3 mt-2">
            <p class="text-base font-normal text-gray-600">Âç∞Ë±°„Ç´„É©„ÉºÔºö</p>

            <span class="w-5 h-5 rounded-full border border-gray-300 shadow-sm"
                  style="background-color:<%= @review.image_tag.color %>;"></span>

            <p class="text-base font-medium text-gray-800">
              <%= @review.image_tag.name %>
            </p>
          </div>
        </div>

        <!-- ‚ñº Êú¨ÊÉÖÂ†± -->
        <div class="w-2/3 space-y-4 -mt-2">

          <!-- ÊäïÁ®øËÄÖÊÉÖÂ†± -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <% if @review.user.avatar.attached? %>
                <%= image_tag @review.user.avatar.variant(resize_to_fill: [48, 48]),
                      class: "w-12 h-12 rounded-full object-cover" %>
              <% else %>
                <%= image_tag "avatar.png", class: "w-12 h-12 rounded-full object-cover" %>
              <% end %>

              <p class="text-base font-medium text-gray-800">
                <%= @review.user.name %>
              </p>
            </div>

            <p class="text-sm text-gray-600">
              ÊäïÁ®øÊó•Ôºö<%= @review.created_at.strftime("%Y/%m/%d") %>
            </p>
          </div>

          <!-- ‚ñº Êú¨ÊÉÖÂ†±Ë©≥Á¥∞ -->
          <div class="space-y-1 -mt-2">
            <p class="text-base font-normal text-gray-600">Êú¨„ÅÆ„Çø„Ç§„Éà„É´</p>
            <p class="text-lg font-medium text-gray-800 pl-4"><%= @review.book.title %></p>

            <p class="text-base font-normal text-gray-600">ËëóËÄÖÂêç</p>
            <p class="text-lg font-medium text-gray-800 pl-4">
              <%= @review.book.author.presence || "Êú™Ë®≠ÂÆö" %>
            </p>
          </div>

          <!-- ‚ñº Âá∫ÁâàÊÉÖÂ†± -->
          <div class="space-y-2 text-gray-800 mt-7">
            <div>
              <p class="text-sm font-normal text-gray-600">Âá∫ÁâàÁ§æ</p>
              <p class="text-sm font-medium text-gray-800 pl-4"><%= @review.book.publisher.presence || "Êú™Ë®≠ÂÆö" %></p>
            </div>

            <div>
              <p class="text-sm font-normal text-gray-600">Áô∫Ë°åÊó•</p>
              <p class="text-sm font-medium text-gray-800 pl-4">
                <%= @review.book.published_on&.strftime("%YÂπ¥%mÊúà%dÊó•") || "Êú™Ë®≠ÂÆö" %>
              </p>
            </div>

            <div>
              <p class="text-sm font-normal text-gray-600">ISBN</p>
              <p class="text-sm font-medium text-gray-800 pl-4"><%= @review.book.isbn.presence || "Êú™Ë®≠ÂÆö" %></p>
            </div>
          </div>

        </div>
      </div>

      <!-- ‚ñº „ÅÇ„Çâ„Åô„Åò -->
      <div class="mb-10">
        <p class="text-base font-normal text-gray-600 leading-tight">„ÅÇ„Çâ„Åô„Åò</p>
        <p class="text-base font-medium text-gray-800 leading-tight whitespace-pre-line">
          <%= @review.book.description.present? ? @review.book.description : "Êú™Ë®≠ÂÆö" %>
        </p>
      </div>

      <!-- ‚ñº „É¨„Éì„É•„ÉºÊú¨Êñá -->
      <div class="mb-10">
        <div class="flex items-center gap-3 leading-tight">
          <p class="text-base font-normal text-gray-600 leading-tight">„É¨„Éì„É•„ÉºÊú¨Êñá</p>

          <% if @review.is_spoiler %>
            <span class="text-red-500 font-semibold text-sm">[„Éç„Çø„Éê„É¨]</span>
          <% end %>
        </div>

        <p class="text-base font-medium text-gray-800 leading-tight whitespace-pre-line">
          <%= @review.content %>
        </p>
      </div>

      <!-- ‚ñº Á∑®ÈõÜ„ÉªÂâäÈô§„Éª„Ç∑„Çß„Ç¢ -->
      <% if current_user == @review.user %>
        <div class="flex justify-between items-center mt-6">

          <!-- Â∑¶ÔºöÁ∑®ÈõÜ„ÉªÂâäÈô§ -->
          <div class="flex gap-4">
            <%= link_to "Á∑®ÈõÜ", edit_review_path(@review),
                  class: "px-4 py-2 bg-[#986321] text-white text-sm rounded-lg hover:opacity-90 transition" %>

            <%= link_to "ÂâäÈô§", review_path(@review),
                  data: { turbo_method: :delete, turbo_confirm: "Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü" },
                  class: "px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:opacity-90 transition" %>
          </div>

          <!-- Âè≥Ôºö„Ç∑„Çß„Ç¢ -->
          <%= link_to "ùïè „Åß„Ç∑„Çß„Ç¢", 
                "https://twitter.com/intent/tweet?text=#{ERB::Util.url_encode("„Äé#{@review.book.title}„Äè„ÅÆ„É¨„Éì„É•„Éº„ÇíÊäïÁ®ø„Åó„Åæ„Åó„ÅüÔºÅ")} &url=#{review_url(@review)}",
                target: "_blank",
                rel: "noopener noreferrer",
                class: "px-4 py-2 bg-black text-white text-sm rounded-lg hover:opacity-90 transition" %>

        </div>
      <% end %>

    </div>
  </div>
</div>
